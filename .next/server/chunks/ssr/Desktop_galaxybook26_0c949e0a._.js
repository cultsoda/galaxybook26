module.exports=[16285,(a,b,c)=>{"use strict";b.exports=a.r(6285).vendored["react-ssr"].ReactJsxRuntime},31175,a=>{"use strict";var b=a.i(16285),c=a.i(41793),d=a.i(17875),e=a.i(69215),f=a.i(76170);function g({className:a,type:c,...d}){return(0,b.jsx)("input",{type:c,"data-slot":"input",className:(0,f.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...d})}function h({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,f.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...c})}function i({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,f.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...c})}function j({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,f.cn)("leading-none font-semibold",a),...c})}function k({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,f.cn)("px-6",a),...c})}function l({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,b.jsx)("table",{"data-slot":"table",className:(0,f.cn)("w-full caption-bottom text-sm",a),...c})})}function m({className:a,...c}){return(0,b.jsx)("thead",{"data-slot":"table-header",className:(0,f.cn)("[&_tr]:border-b",a),...c})}function n({className:a,...c}){return(0,b.jsx)("tbody",{"data-slot":"table-body",className:(0,f.cn)("[&_tr:last-child]:border-0",a),...c})}function o({className:a,...c}){return(0,b.jsx)("tr",{"data-slot":"table-row",className:(0,f.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",a),...c})}function p({className:a,...c}){return(0,b.jsx)("th",{"data-slot":"table-head",className:(0,f.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...c})}function q({className:a,...c}){return(0,b.jsx)("td",{"data-slot":"table-cell",className:(0,f.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...c})}function r(){let a=(0,d.useRouter)(),[f,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(""),[u,v]=(0,c.useState)([]),[w,x]=(0,c.useState)([]),[y,z]=(0,c.useState)(null),[A,B]=(0,c.useState)({totalQty:0,remainingQty:0}),[C,D]=(0,c.useState)(!1);(0,c.useEffect)(()=>{"true"===sessionStorage.getItem("intel-admin-auth")&&r(!0)},[]),(0,c.useEffect)(()=>{f&&E()},[f]);let E=async()=>{D(!0);try{let a=await fetch("/api/sheets"),b=await a.json();b.prizes&&v(b.prizes),b.drawHistory&&x(b.drawHistory)}catch(a){console.error("Error loading prizes:",a),alert("상품 목록을 불러오는데 실패했습니다.")}finally{D(!1)}},F=async a=>{D(!0);try{(await fetch("/api/sheets",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({prizes:a})})).ok?v(a):alert("저장에 실패했습니다.")}catch(a){console.error("Error saving prizes:",a),alert("저장 중 오류가 발생했습니다.")}finally{D(!1)}},G=async a=>{let b=u.map(b=>b.id===a?{...b,totalQty:A.totalQty,remainingQty:A.remainingQty}:b);await F(b),z(null)},H=()=>{z(null)},I=a=>a.split("오전")[0].split("오후")[0].trim(),J=w.reduce((a,b)=>{let c=I(b.date);return a[c]||(a[c]=[]),a[c].push(b),a},{}),K=w.reduce((a,b)=>{let c=I(b.date);return a[c]||(a[c]={}),a[c][b.prizeName]||(a[c][b.prizeName]=0),a[c][b.prizeName]++,a},{}),L=Object.keys(K).sort((a,b)=>b.localeCompare(a));return f?(0,b.jsx)("main",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 p-8",children:(0,b.jsxs)("div",{className:"max-w-6xl mx-auto space-y-8",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("h1",{className:"text-4xl font-bold text-gray-900",children:"관리자 페이지"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(e.Button,{onClick:E,variant:"outline",disabled:C,children:C?"로딩 중...":"새로고침"}),(0,b.jsx)(e.Button,{onClick:()=>a.push("/"),variant:"outline",children:"메인으로 돌아가기"})]})]}),(0,b.jsxs)(h,{children:[(0,b.jsx)(i,{children:(0,b.jsx)(j,{className:"text-2xl",children:"상품 재고 관리"})}),(0,b.jsx)(k,{children:(0,b.jsxs)(l,{children:[(0,b.jsx)(m,{children:(0,b.jsxs)(o,{children:[(0,b.jsx)(p,{className:"w-[200px]",children:"상품명"}),(0,b.jsx)(p,{className:"text-center",children:"전체 수량"}),(0,b.jsx)(p,{className:"text-center",children:"남은 수량"}),(0,b.jsx)(p,{className:"text-center",children:"편집"})]})}),(0,b.jsx)(n,{children:u.map(a=>(0,b.jsxs)(o,{children:[(0,b.jsx)(q,{className:"font-medium",children:a.name}),(0,b.jsx)(q,{className:"text-center",children:y===a.id?(0,b.jsx)(g,{type:"number",value:A.totalQty,onChange:a=>B(b=>({...b,totalQty:Number.parseInt(a.target.value)||0})),className:"w-20 mx-auto text-center",min:"0"}):a.totalQty}),(0,b.jsx)(q,{className:"text-center",children:y===a.id?(0,b.jsx)(g,{type:"number",value:A.remainingQty,onChange:a=>B(b=>({...b,remainingQty:Number.parseInt(a.target.value)||0})),className:"w-20 mx-auto text-center",min:"0"}):(0,b.jsx)("span",{className:0===a.remainingQty?"text-red-600 font-bold":"",children:a.remainingQty})}),(0,b.jsx)(q,{className:"text-center",children:y===a.id?(0,b.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,b.jsx)(e.Button,{size:"sm",onClick:()=>G(a.id),disabled:C,children:"저장"}),(0,b.jsx)(e.Button,{size:"sm",variant:"outline",onClick:H,disabled:C,children:"취소"})]}):(0,b.jsx)(e.Button,{size:"sm",variant:"outline",onClick:()=>{z(a.id),B({totalQty:a.totalQty,remainingQty:a.remainingQty})},disabled:C,children:"수정"})})]},a.id))})]})})]}),(0,b.jsxs)(h,{children:[(0,b.jsx)(i,{children:(0,b.jsx)(j,{className:"text-2xl",children:"일자별 상품 당첨 현황"})}),(0,b.jsx)(k,{children:0===L.length?(0,b.jsx)("p",{className:"text-gray-500 text-center py-8",children:"추첨 기록이 없습니다."}):(0,b.jsxs)(l,{children:[(0,b.jsx)(m,{children:(0,b.jsxs)(o,{children:[(0,b.jsx)(p,{className:"w-[120px]",children:"일자"}),u.map(a=>(0,b.jsx)(p,{className:"text-center",children:a.name},a.id)),(0,b.jsx)(p,{className:"text-center font-bold",children:"합계"})]})}),(0,b.jsx)(n,{children:L.map(a=>{let c=Object.values(K[a]).reduce((a,b)=>a+b,0);return(0,b.jsxs)(o,{children:[(0,b.jsx)(q,{className:"font-medium",children:a}),u.map(c=>(0,b.jsx)(q,{className:"text-center",children:K[a][c.name]||0},c.id)),(0,b.jsx)(q,{className:"text-center font-bold",children:c})]},a)})})]})})]}),(0,b.jsxs)(h,{children:[(0,b.jsx)(i,{children:(0,b.jsx)(j,{className:"text-2xl",children:"일별 추첨 통계"})}),(0,b.jsx)(k,{children:0===Object.keys(J).length?(0,b.jsx)("p",{className:"text-gray-500 text-center py-8",children:"추첨 기록이 없습니다."}):(0,b.jsx)("div",{className:"space-y-6",children:Object.entries(J).sort(([a],[b])=>b.localeCompare(a)).map(([a,c])=>(0,b.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,b.jsx)("h3",{className:"font-bold text-lg mb-4",children:a}),(0,b.jsxs)(l,{children:[(0,b.jsx)(m,{children:(0,b.jsxs)(o,{children:[(0,b.jsx)(p,{children:"시간"}),(0,b.jsx)(p,{children:"상품명"})]})}),(0,b.jsx)(n,{children:c.map((a,c)=>(0,b.jsxs)(o,{children:[(0,b.jsx)(q,{children:a.date.includes("오전")||a.date.includes("오후")?a.date.split(". ").slice(-1)[0]:a.date}),(0,b.jsx)(q,{children:a.prizeName})]},`${a.date}-${c}`))})]}),(0,b.jsx)("div",{className:"mt-4 pt-4 border-t",children:(0,b.jsxs)("p",{className:"font-semibold",children:["총 ",c.length,"회 추첨"]})})]},a))})})]})]})}):(0,b.jsx)("main",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-100 to-gray-200 p-8",children:(0,b.jsxs)(h,{className:"w-full max-w-md",children:[(0,b.jsx)(i,{children:(0,b.jsx)(j,{className:"text-2xl text-center",children:"관리자 로그인"})}),(0,b.jsx)(k,{children:(0,b.jsxs)("form",{onSubmit:a=>{a.preventDefault(),"admin123"===s?(r(!0),sessionStorage.setItem("intel-admin-auth","true")):alert("비밀번호가 올바르지 않습니다.")},className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium mb-2",children:"비밀번호"}),(0,b.jsx)(g,{id:"password",type:"password",value:s,onChange:a=>t(a.target.value),placeholder:"비밀번호를 입력하세요",className:"h-12"})]}),(0,b.jsx)(e.Button,{type:"submit",className:"w-full h-12",children:"로그인"})]})})]})})}a.s(["default",()=>r],31175)}];

//# sourceMappingURL=Desktop_galaxybook26_0c949e0a._.js.map